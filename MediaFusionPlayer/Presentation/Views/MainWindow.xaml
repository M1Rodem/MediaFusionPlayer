<!-- Presentation/Views/MainWindow.xaml -->
<Window x:Class="MediaFusionPlayer.Presentation.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:MediaFusionPlayer.Presentation.Views.Controls"
        Title="MediaFusionPlayer" Height="720" Width="1280"
        Background="#1E1E1E" WindowStartupLocation="CenterScreen"
        AllowDrop="True" Drop="Window_Drop" DragOver="Window_DragOver">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 0: Заголовок -->
            <RowDefinition Height="250"/>
            <!-- 1: Визуализатор -->
            <RowDefinition Height="120"/>
            <!-- 2: Эквалайзер -->
            <RowDefinition Height="*"/>
            <!-- 3: Плейлист -->
            <RowDefinition Height="Auto"/>
            <!-- 4: Прогресс-слайдер -->
            <RowDefinition Height="100"/>
            <!-- 5: Кнопки + громкость -->
        </Grid.RowDefinitions>

        <!-- Заголовок + кнопка -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
            <TextBlock Text="MediaFusionPlayer" FontSize="32" Foreground="White" FontWeight="Bold"/>
            <Button Content="Добавить файлы" Command="{Binding AddFilesCommand}"
                Margin="30,0,0,0" Width="180" Height="45"
                Background="#007ACC" Foreground="White" FontSize="16"/>
        </StackPanel>

        <controls:Visualizer Grid.Row="1" Background="#252525"/>
        <controls:Equalizer Grid.Row="2" Background="#252525"/>

        <!-- Плейлист — теперь виден! -->
        <ListBox Grid.Row="3"
             ItemsSource="{Binding Playlist}"
             SelectedItem="{Binding CurrentTrack, Mode=TwoWay}"
             Background="#252525" Foreground="White"
             Margin="0,0,0,10"
             BorderThickness="0"/>

        <!-- ПРОГРЕСС-СЛАЙДЕР — теперь на своём месте -->
        <controls:ProgressSlider Grid.Row="4"
                             CurrentPosition="{Binding CurrentPosition, Mode=TwoWay}"
                             CurrentDuration="{Binding CurrentDuration, Mode=OneWay}"
                             SeekRequested="ProgressSlider_SeekRequested"
                             Margin="0,10,0,10"/>

        <!-- Кнопки управления -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
            <Button Command="{Binding PreviousCommand}" Content="Previous" Width="100" Height="50" Margin="5"/>
            <Button Command="{Binding PlayPauseCommand}" Content="Play/Pause" Width="120" Height="50" Margin="10"/>
            <Button Command="{Binding StopCommand}" Content="Stop" Width="100" Height="50" Margin="5"/>
            <Button Command="{Binding NextCommand}" Content="Next" Width="100" Height="50" Margin="5"/>
        </StackPanel>

        <controls:VolumeControl Grid.Row="5" HorizontalAlignment="Right" VerticalAlignment="Center" Width="200"/>
    </Grid>
</Window>